<div id="all">
  <div id="all1">
    <h5>Users</h5>
    <br />

    <!-- <div class="invite">
      <input type="email" id="form3Example3" class="form-control" name="email" placeholder="Enter users's email"/>

      <div class="mb-3">
        <button class="btn btn-primary d-grid w-100" type="submit">Invite user</button>
      </div>
    </div> -->

    <div class="input-group">
      <input type="email" id="form3Example3" class="form-control" name="email" [(ngModel)]="invitation.receiver" placeholder="Enter user's email"/>
      <div class="mb-3">
        <button class="btn btn-primary d-grid w-100" type="submit" (click)="Invite()">Invite</button>
      </div>
    </div>

    <br />
    <table class="invoice-list-table table">
      <thead>
        <tr>
          <th class="specth">User
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="filter"
              viewBox="0 0 16 16"
              (click)="sortUsersByName()"
            >
            <path
            fill-rule="evenodd"
            d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5m-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5"
          />
        </svg>

          </th>

          <th>Role </th>
          <!-- <th>WorkLoad</th> -->
          <th>Actions</th>
        </tr>
      </thead>
      <tbody class="table-border-bottom-0">
        <tr *ngFor="let user of allUsers" >
          <td  *ngIf="!user.archived">
            <div class="d-flex justify-content-start align-items-center">
              <div class="avatar-wrapper">
                <div class="avatar avatar-sm me-2"><img src="../../../assets/navIcons/user (4).png" alt="Avatar"></div>
              </div>
              <div class="d-flex flex-column">
                <span  class="text-body text-truncate fw-medium">{{user.firstName}} {{user.lastName}}</span>
                <small class="text-truncate text-muted">{{user.email}}</small>
              </div>
            </div>
          </td>
          <td  *ngIf="!user.archived">{{GetUserRole(user.role)}}</td>
          <!-- <td><span class="badge bg-label-success"> Workload</span></td> -->
          <td  *ngIf="!user.archived">
            <div class="d-flex align-items-center">
              <img src="../../../assets/navIcons/edit.png" class="nav-link dropdown-toggle hide-arrow" id="tableIcon"
                 href="javascript:void(0);" data-bs-toggle="dropdown" aria-expanded="false">
                <div class="dropdown-menu pop">

                <div class="update">
                <span class="span-dropdown-item">Update user</span>
                  <form (ngSubmit)="UpdateUser(user.id)">
                    <div class="mb-3">
                      <label for="email" class="form-label">Email</label>
                      <input type="email" id="form3Example3" class="form-control" name="email" [(ngModel)]="updateUser.Email" placeholder="Enter user's email"/>
                    </div>
                    <div class="mb-3">
                      <label for="fisrt name" class="form-label">Fisrt Name</label>
                      <input type="email" id="form3Example3" class="form-control" name="email" [(ngModel)]="updateUser.FirstName" placeholder="Enter user's First Nsme"/>
                    </div>
                    <div class="mb-3">
                      <label for="email" class="form-label">Last Name</label>
                      <input type="email" id="form3Example3" class="form-control" name="email" [(ngModel)]="updateUser.LastName" placeholder="Enter user Last Name"/>
                    </div>
                    <div class="mb-3">
                      <button class="btn btn-primary d-grid w-100" type="submit">Update</button>
                    </div>

                </form>
              </div>
              </div>

                <img src="../../../assets/navIcons/delete.png" (click)="ArchiveUser(user.id)" id="tableIcon" aria-expanded="false">

                <img src="../../../assets/navIcons/more.png" class="nav-link dropdown-toggle hide-arrow" id="tableIcon"
                  href="javascript:void(0);" data-bs-toggle="dropdown" aria-expanded="false">

                  <div class="dropdown-menu dropdown-menu-end">
                    <div class="update">
                  <span class="span-dropdown-item">Change user role</span>
                  <form (ngSubmit)="ChangeUserRole()">

                     <div class="mb-3">
                      <label for="fisrt name" class="form-label">User's id</label>
                      <input type="number" id="form3Example3" class="form-control" name="email" [(ngModel)]="changeRole.Id" placeholder="User's id"/>
                    </div>
                    <div class="mb-3">
                      <label for="email" class="form-label">Role</label>
                      <input type="number" id="form3Example3" class="form-control" name="email" name="role" [(ngModel)]="changeRole.Role" placeholder="User's role"/>
                    </div>
                    <div class="mb-3">
                      <button class="btn btn-primary d-grid w-100" type="submit">Change</button>
                    </div>
                  </form>
                </div>
              </div>

            </div>
          </td>
        </tr>




      </tbody>
</table>
</div>
</div>

<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="#fff"
  type="ball-scale-multiple"
>
  <p style="font-size: 20px; color: white">Loading...</p>
</ngx-spinner>
